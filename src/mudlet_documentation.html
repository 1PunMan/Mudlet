<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"><head>


<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.4.1">
<title>Mudlet User Guide</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){generateToc(2)}
/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, October 2006. License: GPL */

function getText(el) {
  var text = "";
  for (var i = el.firstChild; i != null; i = i.nextSibling) {
    if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
      text += i.data;
    else if (i.firstChild != null)
      text += getText(i);
  }
  return text;
}

function TocEntry(el, text, toclevel) {
  this.element = el;
  this.text = text;
  this.toclevel = toclevel;
}

function tocEntries(el, toclevels) {
  var result = new Array;
  var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
  // Function that scans the DOM tree for header elements (the DOM2
  // nodeIterator API would be a better technique but not supported by all
  // browsers).
  var iterate = function (el) {
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
        var mo = re.exec(i.tagName)
        if (mo)
          result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
        iterate(i);
      }
    }
  }
  iterate(el);
  return result;
}

// This function does the work. toclevels = 1..4.
function generateToc(toclevels) {
  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementsByTagName("body")[0], toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "toc" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    document.getElementById("header").removeChild(toc);
}
/*]]>*/
</script>
</head><body>
<div id="header">
<h1>Mudlet User Guide</h1>
<span id="author">Vadim_Peretokin,_Mikel_Jose,Maksym_Grinenko</span><br>
<span id="email"><tt>&lt;<a href="mailto:vadim.peretokin@mudlet.org">vadim.peretokin@mudlet.org</a>&gt;</tt></span><br>
<span id="revision">version Draft 1,</span>
13 Martch 2009
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
<div class="toclevel1"><a href="#_introduction">1. Introduction</a></div><div class="toclevel1"><a href="#_using_mudlet">2. Using Mudlet</a></div><div class="toclevel2"><a href="#_quick_start_guide">2.1. Quick Start Guide</a></div><div class="toclevel2"><a href="#_connecting_to_your_game">2.2. Connecting to your game</a></div><div class="toclevel2"><a href="#_basic_mudlet_use">2.3. Basic Mudlet use</a></div><div class="toclevel2"><a href="#_mudlet_8217_s_automation_features">2.4. Mudlet’s automation features</a></div><div class="toclevel2"><a href="#_automation_and_mud_rules">2.5. Automation and MUD rules</a></div><div class="toclevel2"><a href="#_basic_scripting">2.6. Basic scripting</a></div><div class="toclevel2"><a href="#_how_to_disable_all_triggers_aliases_quickly">2.7. How to disable all triggers / aliases quickly</a></div><div class="toclevel2"><a href="#_working_with_the_script_editor">2.8. Working with the script editor</a></div><div class="toclevel1"><a href="#_advanced_features_scripting">3. Advanced Features (Scripting)</a></div><div class="toclevel2"><a href="#_events">3.1. Events</a></div><div class="toclevel2"><a href="#_and_and_or_condition_triggers">3.2. "AND" and "OR" Condition Triggers</a></div><div class="toclevel2"><a href="#_trigger_chains_filter_chains">3.3. Trigger Chains - Filter Chains</a></div><div class="toclevel2"><a href="#_multi_line_triggers_and_multi_condition_triggers">3.4. Multi-Line Triggers and Multi-Condition Triggers</a></div><div class="toclevel2"><a href="#_temporary_triggers">3.5. Temporary Triggers</a></div><div class="toclevel2"><a href="#_line_triggers_scripting_only">3.6. Line Triggers (scripting only)</a></div><div class="toclevel2"><a href="#_the_timer_engine">3.7. The Timer Engine</a></div><div class="toclevel2"><a href="#_using_mudlet_variables_in_your_script">3.8. Using Mudlet variables in your script.</a></div><div class="toclevel2"><a href="#_accessing_the_mudlet_buffer">3.9. Accessing the mudlet buffer</a></div><div class="toclevel2"><a href="#zscript-to-mudlet-lua">3.10. zScript (zMud scripting) to Mudlet’s Lua school</a></div><div class="toclevel1"><a href="#_lua_api">4. Lua API</a></div><div class="toclevel1"><a href="#_appendix_a">5. Appendix A</a></div><div class="toclevel2"><a href="#_mud_mmorpg_specific_glossary">5.1. MUD/MMORPG-specific glossary</a></div></div>
</div>
<div id="preamble">
<div class="sectionbody">
</div>
</div>
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Welcome to <strong>Mudlet</strong>, a fully featured, easy to use MUD client with an array of tools available to get the most out of your gaming experience.</p></div>
<div class="paragraph"><p>Throughout this documentation we hope to familiarise you with all aspects of Mudlet, from the interface to its <em>very</em>
powerful scripting system. We try to maintain a very high level of
quality in Mudlet in order to keep it efficient and easy to use for
beginners, as well as extremely flexible and powerful for the advanced
users. We hope you enjoy using Mudlet as much as we enjoy making it!</p></div>
<div class="paragraph"><p>The full list of features, for both current and planned future releases, can be on the Mudlet website, on the <a href="http://mudlet.org/about/">About</a> page.</p></div>
<div class="admonitionblock">
<table><tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The minds behind Mudlet would like to know exactly what you think about Mudlet. Please leave us your feedback at the <a href="http://mudlet.org/feedback/">feedback</a> page so that we may continue improving and making your game-play even more fascinating with Mudlet.</td>
</tr></tbody></table>
</div>
</div>
<h2 id="_using_mudlet">2. Using Mudlet</h2>
<div class="sectionbody">
<h3 id="_quick_start_guide">2.1. Quick Start Guide</h3>
<div class="paragraph"><p>To connect to the MUD of your choice, click on <tt>Connections</tt> → <tt>Connection Profiles</tt>.</p></div>
<div class="ulist"><ul>
<li>
<p>
Create a new profile by clicking on <tt>Add New Profile</tt>.
</p>
</li>
<li>
<p>
Specify the <tt>host</tt> and the <tt>port</tt> of the MUD (This information is usually found on the MUD’s homepage).
</p>
</li>
<li>
<p>
Now just click <tt>Connect</tt> to play!
</p>
</li>
</ul></div>
<h3 id="_connecting_to_your_game">2.2. Connecting to your game</h3>
<div class="paragraph"><p>Click on the <tt>Connect</tt> button to open
the connection window. Here, you can create profiles to connect to your
MUD with, or connect using existing ones - either double-click on it or
select it from the list on the left and click <tt>Connect</tt> to get started.</p></div>
<h4 id="_creating_a_new_profile">2.2.1. Creating a New Profile</h4>
<div class="paragraph"><p>To get started, click on <tt>Add New Profile</tt>. You need to tell Mudlet where to connect to by filling in the <tt>Server address:</tt> and <tt>Port:</tt> fields - your MUD website should have this information.</p></div>
<h5 id="_automatic_log_in">Automatic Log-in</h5>
<div class="paragraph"><p>To enable automatic login, just fill in the <tt>Character name:</tt> and <tt>Password:</tt> fields. Mudlet will then automatically login for you.</p></div>
<h3 id="_basic_mudlet_use">2.3. Basic Mudlet use</h3>
<h4 id="_split_screen">2.3.1. Split Screen</h4>
<div class="paragraph"><p>Mudlet features a split screen, allowing you
to through old passages without missing what is going on at the
moment.. If you scroll up in the old text, the screen will split in two
parts. The lower part will follow the MUD output while the upper part
will stay focused on your scrolling.</p></div>
<div class="paragraph"><p>Split screen can be activated via the page up
/ page down keys or with the mouse wheel. Scrolling down to the current
events will close the split screen automatically. A click on the middle
mouse button will close the split screen immediately. The size of the 2
parts of the split screen can be modidfied when dragging the seperator
bar with the mouse.</p></div>
<h4 id="_text_completion">2.3.2. Text completion</h4>
<div class="paragraph"><p>Mudlet features the standard up/down key command completion, and tab-completion for words that it has previously seen.</p></div>
<h5 id="_command_completion">Command completion</h5>
<div class="paragraph"><p>To use the command completion, you can press
the ↑ (up) or ↓ (down) arrow keys to rotate through the buffer of
previously used commands.</p></div>
<div class="paragraph"><p>To use the selected command, you can just press <tt>Enter</tt> - or if you’d like something else instead, type the new command in.</p></div>
<h5 id="_word_completion">Word completion</h5>
<div class="paragraph"><p>Mudlet also sports tab completion that you
can use to fill in long words. The way it works is that Mudlet
remembers every word it sees - and when you press Tab, it finishes it
for you.</p></div>
<div class="paragraph"><p>This can be extremely useful when you’re with long names and such.</p></div>
<h3 id="_mudlet_8217_s_automation_features">2.4. Mudlet’s automation features</h3>
<div class="paragraph"><p>Mudlet offers a vast array of standard
features to automate or otherwise improve your gaming experience. These
include, but are not limited to:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Aliases</strong> – user-defined text input, which is converted into a different, usually longer input before being sent to the MUD, e.g. <tt>gg</tt> → <tt>get gold from ground;put gold in 2.bag</tt>.
</p>
</li>
<li>
<p>
<strong>Keybindings</strong> – also known as hotkeys, allow executing
certain user-defined commands by simultaneously pressing a specific
combination of keys, e.g. <tt>CTRL+H</tt> → <tt>send say Hello Miyuki!</tt> to the MUD or <tt>plays La Marseillaise</tt>
</p>
</li>
<li>
<p>
<strong>Triggers</strong> – execute user-defined commands upon receiving specific out from the MUD, e.g. MUD sends <tt>You see Elyssa standing here.</tt> → send <tt>poke Elyssa</tt> to the MUD.
</p>
</li>
<li>
<p>
<strong>Timers</strong> – delay the execution of a command or execute it after a specified period of time, e.g. <tt>throw gauntlet to Eric</tt>-<tt>wait 3 seconds</tt>-<tt>exclaim Let us end this here!</tt>
</p>
</li>
<li>
<p>
<strong>Variables</strong> – allow the user to store text or numbers for easier use inside scripts.
</p>
</li>
<li>
<p>
<strong>Events</strong> – allow the user to make triggers for specific
events like when Mudlet has connected to the MUD, or even user-defined
events to use in complex system making.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Scripting allows the user to create
automation utilities (triggers, aliases) with the Lua scripting
language. The possibilities of what can be achieved by using this
technique are, practically speaking, endless - ranging from teaching
the client how to heal your character in combat for you to creating a
fully automated robot (known as `bot`s) that will completely take over
the control for your character (especially useful for completing
repetitive, rudimentary tasks).</p></div>
<h3 id="_automation_and_mud_rules">2.5. Automation and MUD rules</h3>
<div class="paragraph"><p>Effectively speaking, it is possible to
create an AI (Artificial Intelligence) that does everything you can do
in a MUD. Even more so, the program will be able outperform you in
almost every routine operation. The difficulty of creating such a
program depends on the task it has to perform: gathering loot being
very easy, walking through a dungeon and leveling you character being
moderately easy and socially interacting with other real people being
outrageously difficult (see <a href="http://alice.pandorabots.com/">A.L.I.C.E.</a>). In the end of the day, you’re teaching your client to process information and act the way you consider best suited.</p></div>
<div class="paragraph"><p>Because scripting is so powerful, it can give
you a competitive advantage that some people consider it unfair or even
cheating. As of the moment of this writing (2 November 2008), this sort
of automation can be best observed in commercial massively-multiplayer
online role-playing games (MMORPG), known as gold-farming or
power-leveling. The basic idea is creating a system that will raise
your character to the maximum level and gather in-game currency in the
process, both of which can be effectively exchanged for real-world
currency. The spread of the above aspects can have much more far
reaching consequences than just being unfair, such as inflation, loss
of balance in terms of game-mechanics or, ultimately, a complete crash
of in-game economy. For more information see the paper <a href="http://papers.ssrn.com/sol3/papers.cfm?abstract_id=1235602">"Simple Economics of Real-Money Trading in Online Games"</a> by Jun-Sok Huhh of the Seoul National University.</p></div>
<div class="paragraph"><p>For these, and various other, reasons the
administrators and owners of the corresponding virtual worlds can
forbid the usage of automation tools. A failure to comply can result in
suspension or deletion of the user’s character or account for future
denial of service.</p></div>
<div class="paragraph"><p>By including scripting support in Mudlet, we
effectively give you the ability to create and utilise AI tool-kits,
however, we do not endorse or promote the usage of these systems if
it’s prohibited in your MUD. Keep in mind that by cheating you can
lessen the quality of gameplay for both, your fellow players and
yourself.</p></div>
<h3 id="_basic_scripting">2.6. Basic scripting</h3>
<div class="paragraph"><p>The following part of the guide is written
for new beginners in scripting. If you’re coming over from zMud or
cMud, you might want to <a href="#zscript-to-mudlet-lua">skip ahead</a> to our migrating section.</p></div>
<h4 id="_variables_basics">2.6.1. Variables - basics</h4>
<div class="paragraph"><p>Variables are containers for data. In Lua,
they can store numbers or words. You can use variables to store
important information like how much gold do you have, or have them
remember things for you.</p></div>
<div class="paragraph"><p>The syntax for making a variable remember a number is the following:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>variable <span style="color: rgb(153, 0, 0);">=</span> number</tt></pre></div></div>
<div class="paragraph"><p>Or to make it remember some text:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>variable <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(255, 0, 0);">"some text"</span></tt></pre></div></div>
<div class="paragraph"><p>For example, here we’ll set the <tt>myhealth</tt> variable to number <tt>1345</tt>, and the <tt>myname</tt> variable to <tt>Anna</tt>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>myhealth <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(153, 51, 153);">1345</span>
myname <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(255, 0, 0);">"Anna"</span></tt></pre></div></div>
<div class="paragraph"><p>You can also do basic maths easily, for example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>a <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(153, 51, 153);">2</span> <span style="color: rgb(153, 0, 0);">+</span> <span style="color: rgb(153, 51, 153);">2</span> <span style="font-style: italic;"><span style="color: rgb(154, 25, 0);">--sets variable a to the value of 4</span></span>
b <span style="color: rgb(153, 0, 0);">=</span> a <span style="color: rgb(153, 0, 0);">-</span> <span style="color: rgb(153, 51, 153);">1</span> <span style="font-style: italic;"><span style="color: rgb(154, 25, 0);">--sets variable b to the value of 3</span></span></tt></pre></div></div>
<div class="paragraph"><p>To concatenate strings together, you can use the <tt>..</tt> expression:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>first_name <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(255, 0, 0);">"Joe"</span>
last_name <span style="color: rgb(153, 0, 0);">=</span> <span style="color: rgb(255, 0, 0);">"Plumber"</span>
full_name <span style="color: rgb(153, 0, 0);">=</span> firstname <span style="color: rgb(153, 0, 0);">..</span> <span style="color: rgb(255, 0, 0);">" "</span> <span style="color: rgb(153, 0, 0);">..</span> last_name <span style="font-style: italic;"><span style="color: rgb(154, 25, 0);">--sets the full_name variable to "Joe Plumber", with a space inbetween.</span></span></tt></pre></div></div>
<h4 id="_how_to_send_text_to_the_mud">2.6.2. How to send text to the mud</h4>
<div class="paragraph"><p>To send a command to the MUD, you can use the <tt>send()</tt> function. Data inside the quotes is sent to the MUD.</p></div>
<div class="paragraph"><p>For example, the following code sends the command to <tt>eat bread</tt>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">send</span></span><span style="color: rgb(153, 0, 0);">(</span><span style="color: rgb(255, 0, 0);">"eat bread"</span><span style="color: rgb(153, 0, 0);">)</span></tt></pre></div></div>
<div class="paragraph"><p>If you’d like to include variables in the
send command, you need to prefix and suffix them with two dots outside
the quotes, like this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">send</span></span><span style="color: rgb(153, 0, 0);">(</span><span style="color: rgb(255, 0, 0);">"My name is "</span> <span style="color: rgb(153, 0, 0);">..</span> full_name <span style="color: rgb(153, 0, 0);">..</span> <span style="color: rgb(255, 0, 0);">". What's yours?"</span><span style="color: rgb(153, 0, 0);">)</span></tt></pre></div></div>
<h4 id="_how_to_echo_text_to_yourself">2.6.3. How to echo text to yourself</h4>
<div class="paragraph"><p>To echo (show text to yourself) you can use the <tt>echo()</tt> function.</p></div>
<div class="paragraph"><p>For example, the following code will display <tt>Time to eat dinner!</tt> on your screen:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">echo</span></span><span style="color: rgb(153, 0, 0);">(</span><span style="color: rgb(255, 0, 0);">"Time to eat dinner~"</span><span style="color: rgb(153, 0, 0);">)</span></tt></pre></div></div>
<div class="paragraph"><p>If you’d like to include variables in your echo, you can follow the same method as for the <tt>send</tt> command:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">echo</span></span><span style="color: rgb(153, 0, 0);">(</span><span style="color: rgb(255, 0, 0);">"I have "</span> <span style="color: rgb(153, 0, 0);">..</span> my_gold <span style="color: rgb(153, 0, 0);">..</span> <span style="color: rgb(255, 0, 0);">" gold pieces!"</span><span style="color: rgb(153, 0, 0);">)</span></tt></pre></div></div>
<h4 id="_aliases">2.6.4. Aliases</h4>
<div class="paragraph"><p>The aliases are the most basic way of
automating the gameplay - you can use aliases to shorten the amount of
typing you do. For example:</p></div>
<div class="quoteblock">
<div class="title">Example - Brew’o'Matic 6000</div>
<div class="content">
<div class="paragraph"><p>You’re walking around the epic dungeon of the
Unholy Firedragon of Westersand, gathering roots in order to brew a
potion and thus restore the growth of hair on Farmer Benedict’s bald
head. Once you see a root, you need to:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>open the bag of tools
get the sickle of damnation from the bag of tools
cut the root of hair-growth
clean the sickle of damnation of deadly root acid
put the sickle of damnation in the bag of tools
close the bag of tools
open the magical bag of storing
take the root
put the root into the magical bag of storing
close the magical of storing</tt></pre>
</div></div>
<div class="paragraph"><p>and once you’re done, do the exact same thing nine more times… trice a day.</p></div>
</div>
<div class="attribution">
</div></div>
<div class="paragraph"><p>Alternatively, you just create an alias that would do this all with a single command - for example, <tt>quest</tt>.</p></div>
<h5 id="_making_a_sample_alias">Making a sample alias</h5>
<div class="paragraph"><p>To get started, go click on the <tt>Aliases</tt> button in Mudlet, and then on the <tt>Add</tt> one. This will make a blank alias for you, which we’ll now fill in.</p></div>
<div class="paragraph"><p>The <tt>Alias name</tt> field is optional -
it’s mainly used for the alias listing that you see on the left as an
easy way to distintuish all of teh aliases. You can just name our alias
<tt>test</tt> for now.</p></div>
<div class="paragraph"><p>The <tt>Regex</tt> field is where you’d put in the alias command - when you type this in and press <tt>Enter</tt>, Mudlet will do the long list of commands we’ll tell it to.</p></div>
<div class="paragraph"><p>Regexes are a special way of matching words - but for the beginning purposes, just place the word you’d like to match inside <tt>\^</tt> and <tt>$</tt> symbols - so type in <tt>\^quest$</tt> in the <tt>Regex</tt> field.</p></div>
<div class="paragraph"><p>Now we get to the <tt>Scripting</tt> text
box. Here, we’ll tell Mudlet what to do - and we’d like it to send a
bunch of commands to the MUD. So fill it in with this:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>send("open the bag of tools")
send("get the sickle of damnation from the bag of tools")
send("cut the root of hair-growth")
send("clean the sickle of damnation of deadly root acid")
send("put the sickle of damnation in the bag of tools")
send("close the bag of tools")
send("open the magical bag of storing")
send("take the root")
send("put the root into the magical bag of storing")
send("close the magical of storing")</tt></pre>
</div></div>
<div class="paragraph"><p>That’s it! Now press <tt>Save</tt>, and test out your alias by typing <tt>quest</tt>.</p></div>
<h4 id="_triggers">2.6.5. Triggers</h4>
<div class="paragraph"><p>Triggers are an automation feature offered in
many modern MUD clients. They allow you quicker response to a
parcticular situation or greater convenience since you need to do less
manual work.</p></div>
<div class="paragraph"><p>The way a trigger works is the following -
you give the trigger a line you’d like it to match, and some actions to
do. When the trigger matches a particular line, it’ll do the actions
you’ve told it to.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example - Keep your friends close, and your sidekicks closer</div>
<div class="paragraph"><p>You, the squire to King Martin Luther III,
are fighting your way through the horde of skeletons summoned by the
Lich Queen of Afaikrot. Along with is your Baywatch sidekick Keira (or
Keirar if you’re female), whose primary role is introducing the
pointless romantic sub-plot. The skeletons are armed with
standard-issue scimitars, some of which are cursed to afflict the enemy
with the Ancient, Deadly Curse of Acne (-5 respect from
Keira(r)/second). Luckily enough, you’re armed with the Bottomless
Bottle of Face-cream of Peeling, which, when applied, can remove the
curse.</p></div>
</div></div>
<div class="paragraph"><p>This is where the triggers jump in! Rather
than carefully watching the output of the battle and typing in "apply
cream to face" every time you get hit by the curse, you can let the
client do this for you by:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Exact match line: "You start feeling the spots appearing as the skeleton slices at you with his scimitar."
Script:
send("apply cream to face")</tt></pre>
</div></div>
<div class="paragraph"><p>Once the trigger is set, Mudlet will almost instantaneously send the said command each time the matched line appears.</p></div>
<h5 id="_matching_one_unknown">Matching one unknown</h5>
<div class="paragraph"><p>You can also set up a trigger to gather the
scimitars, gold or whatever the skeletons could carry around with them.
Since we do not know what the loot is, we will need to set up a trigger
to match the line and take whatever was dropped. Examples:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>The skeleton drops ring.
The skeleton drops gold.
The skeleton drops scimitar.</tt></pre>
</div></div>
<div class="paragraph"><p><tt>The skeleton drops_</tt> is the generic segment of the line, the loot itself varies. Thus, we need to tell the client to <tt>take_</tt> whatever the skeleton dropped. We do this by setting up a so-called <tt>regular expression</tt>:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Perl Style Regular Expression: The skeleton drops (.*?).
Script:
send("take " .. matches[1])</tt></pre>
</div></div>
<div class="paragraph"><p>The expression <tt>(.*?)</tt> matches any characters that the client receives between <tt>The skeleton drops_</tt> (NB: notice the blank at the end) and the full-stop. <tt>matches[1]</tt> simply transfers <em>the first matched text fitting the search criterea</em> into the output.</p></div>
<h5 id="_matching_multiple_unknowns">Matching multiple unknowns</h5>
<div class="paragraph"><p>Now, let’s try making a trigger that would gather the loot from anybody:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Perl Style Regular Expression: (.*?) drops (.*?).
Script:
send("take " .. matches[2])</tt></pre>
</div></div>
<div class="paragraph"><p>In this case, any time somebody, or
something, drops something else, or someone else, the client will pick
it up. Note that we used <tt>matches[2]</tt> instead of <tt>matches[1]</tt> this time, in order to pick up the second match. If we used <tt>matches[1]</tt>, we’d end up picking up the skeleton’s corpse.</p></div>
<h5 id="_matching_known_variants">Matching known variants</h5>
<div class="paragraph"><p>If you’re playing a MUD in English, you’ll notice that these triggers probably won’t work due to English syntax. Compare:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>The skeleton drops apple.
The skeleton drops an apple.</tt></pre>
</div></div>
<div class="paragraph"><p>Chances are that you’ll see the later a little more often. If we used our old RegEx, the output would look something like this.</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>INPUT: The skeleton drops an apple.
OUTPUT: take an apple</tt></pre>
</div></div>
<div class="paragraph"><p>Most MUDs can’t handle determiners, such as articles (i.e. <tt>a</tt>, <tt>an</tt>, <tt>the</tt>) or quantifiers (e.g. <tt>five</tt>, <tt>some</tt>, <tt>each</tt>),
in user-input. To match this line we could either create multiple
triggers matching every possible article or a regular expression
filtering out these words:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Perl Style Regular Expression: (.*?) drops (a|an|the|some|a couple of|a few|) (.*?).
Script:
send("take " .. matches[3])</tt></pre>
</div></div>
<div class="paragraph"><p>Once again, note that we’re using the third match (<tt>matches[3]</tt>)
this time.
NOTE: Certain other languages, with a morphology richer than that of
English, might require a somewhat different approach. If you’re stuck,
and your MUD-adminitrators don’t prohibit the use of triggers, try
asking on the corresponding world’s forums.</p></div>
<div class="paragraph"><p>For more information, see the chapter Regular Expressions.
==== explain basic regex characters (^, $, (\w+), (\d+) and .*) and how to use them properly.
==== Retrieving wildcards from triggers
Wildcards from triggers are stored in the <em>matches[]</em> table. The first wildcard goes into <em>matches[1]</em>, second into <em>matches[2]</em>, and so on, for however many wildcards do you have in your trigger.</p></div>
<h5 id="_example">Example</h5>
<div class="paragraph"><p>For example, you’d like to say outloud how
much gold did you pick up from a slain monster. The message that you
get when you pick up the gold is the following:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>You pick up 16 gold.</tt></pre>
</div></div>
<div class="paragraph"><p>A trigger that matches this pattern could be the following:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Perl Style Regular Expression: ^You pick up (\d+) gold\.$</tt></pre>
</div></div>
<div class="paragraph"><p>And in your code, the variables <tt>matches[1]</tt> will contain the amount of gold you picked up (in this case, <em>16</em>). So now to say outloud how much gold did you loot, you can do the following:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Script: echo("I got " .. matches[1] " gold!")</tt></pre>
</div></div>
<h5 id="_more_advanced_example">More advanced example</h5>
<div class="paragraph"><p>Here’s an example by Heiko, which makes you talk like Yoda:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>Perl Style Regular Expression: say (\w+).*(\w*).*(.*)
Script:  command = "say "..matches[3].." "..matches[1].." "..matches[2]</tt></pre>
</div></div>
<div class="paragraph"><p>What it does here is save the <tt>first word</tt>, the <tt>second word</tt> and then the <tt>rest of the text</tt> into wildcards. It then says <tt>rest of the text</tt> first, then the <tt>first word</tt> and then the <tt>second word</tt>.</p></div>
<h4 id="_how_to_highlight_words">2.6.6. How to highlight words</h4>
<div class="paragraph"><p>To highlight something in Mudlet, you first use the <tt>select</tt> function to select what you’d like to highlight, and then either the <tt>fg</tt> function to color the letters or <tt>bg</tt> to highlight the background of the letters. For example, the following code would highlight the word <tt>pond</tt> in a bluebackground and red letters:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 2.10
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">selectString</span></span><span style="color: rgb(153, 0, 0);">(</span> <span style="color: rgb(255, 0, 0);">"pond"</span><span style="color: rgb(153, 0, 0);">,</span> <span style="color: rgb(153, 51, 153);">1</span> <span style="color: rgb(153, 0, 0);">)</span>
<span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">fg</span></span><span style="color: rgb(153, 0, 0);">(</span> <span style="color: rgb(255, 0, 0);">"red "</span> <span style="color: rgb(153, 0, 0);">)</span>
<span style="font-weight: bold;"><span style="color: rgb(0, 0, 0);">bg</span></span><span style="color: rgb(153, 0, 0);">(</span> <span style="color: rgb(255, 0, 0);">"blue"</span> <span style="color: rgb(153, 0, 0);">)</span></tt></pre></div></div>
<h4 id="_keybindings">2.6.7. Keybindings</h4>
<div class="paragraph"><p>Keybindings, or hotkeys, are in many respects
very similar to aliases, however, instead of typing in what you want to
be done, you simply hit a key (or combination of keys) and let the
Mudlet do the work.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example - You don’t drink tea, you sip it!</div>
<div class="paragraph"><p>You’re participating in an in-game tea
sipping contest. The winner is the first person to sip an Earl Grey,
should the quiz-master make a vague reference to a series of tubes, or
a Ceylon Mint, if he begins talking about the specific theory of
relativity. In order to give us a competitive advantage, we will define
two keybindings:</p></div>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt>HOTKEY: F1
EXPAND TO: sip earl grey

HOTKEY: F2
EXPAND TO: sip ceylon mint</tt></pre>
</div></div>
<div class="paragraph"><p>Now you just have to listen, or rather read, carefully and hit either F1 or F2 to claim that prize.</p></div>
<div class="paragraph"><p>Another practical use for keybindings would
be creating a so-called "targeting system", which is especially useful
for grinding down armies of pumpkin-men in MUDs without auto-attack.
See the Variables chapter for further details.</p></div>
<h4 id="_timers">2.6.8. Timers</h4>
<div class="paragraph"><p>Timers, as the name suggests, can be used to
execute a specific command at a certain time, after a certain time or
once every so often.</p></div>
<div class="sidebarblock">
<div class="content">
<div class="title">Example - Don’t miss the training!</div>
<div class="paragraph"><p>Your character can train in his attributes
once every three hours. You could either try tracking this manually or
add a trigger starting timer after each training. Once the three hours
have passed, your character will conveniently say to himself that it is
time to do a couple of push-ups.
MUDLET RECOMMENDS: Alternatively, you could also create a timer that
would suggest that -you- take a break and do some real-life push-ups
each two hours of playtime. Think of the possibilities!</p></div>
</div></div>
<h3 id="_how_to_disable_all_triggers_aliases_quickly">2.7. How to disable all triggers / aliases quickly</h3>
<h3 id="_working_with_the_script_editor">2.8. Working with the script editor</h3>
<h4 id="_exporting_and_importing_profiles_or_packages">2.8.1. Exporting and Importing Profiles or Packages</h4>
<div class="paragraph"><p>Mudlet stores your profiles as XML files in
your home directory under
.config/mudlet/profiles/your_profile_name/current (note the leading
dot).</p></div>
<div class="paragraph"><p>The file name consists of the date and time,
the profile was written to disc.
You can export packages of a trigger branch, alias branch, function
key, scripts etc. by clicking on a folder in the tree of the particular
item in question and then click on the export icon. You’ll be asked to
give a filename for your package. You can export arbitrarily complex
structures by moving them into a folder. You cannot mix items at the
moment. Importing packages is straight forward and fully automatic.
You can also import entire profiles as they are basically packages.</p></div>
<h5 id="_making_triggers">Making triggers</h5>
<div class="paragraph"><p>The current editor presents a number of known
usability problems, which will be fixed later on in the development
cycle. For now though we documented them here so you don’t come across
any surprises.</p></div>
<div class="paragraph"><p>To make a new trigger, click on the <em>New</em> button with the <em>Triggers</em> view selected. Type in the pattern you’d like the trigger to patch in the <em>Add to list</em> line, and press <em>Enter</em> on your keyboard to add it to the list.</p></div>
</div>
<h2 id="_advanced_features_scripting">3. Advanced Features (Scripting)</h2>
<div class="sectionbody">
<h3 id="_events">3.1. Events</h3>
<h4 id="_how_to_make_an_event_trigger">3.1.1. how to make an event trigger?</h4>
<h4 id="_how_to_create_an_event">3.1.2. how to create an event?</h4>
<h4 id="_example_2">3.1.3. example</h4>
<h3 id="_and_and_or_condition_triggers">3.2. "AND" and "OR" Condition Triggers</h3>
<div class="paragraph"><p>AND -Triggers execute their respective
command or script only if all conditions in their respective conditions
expression list are fullfilled.
OR-Triggers execute when <strong>any</strong> one of their conditions
is true.
To make OR-Triggers you simply have to add a few conditions to the
conditions list e.g. in our example: "pond", "frog", "Plop". The
trigger will now also execute on lines like this: "A frog is green" or
"You hear a loud Plop!" However, it will not execute on "With a loud
plop the frog dived into the water." because "plop" in the line is in
lower case letters and your condition specified a "P" in upper case.
The simplest form of AND-Triggers in Mudlet are Trigger Chains or
Filter Chains, whatever you’d like to call it.</p></div>
<h3 id="_trigger_chains_filter_chains">3.3. Trigger Chains - Filter Chains</h3>
<div class="paragraph"><p>Imagine the following scenario: You want to
collect some berries. You know that the room contains some berries if
the room description contains the words "You see several sorts of
berries." You make a new substring trigger for this line, but instead
of chosing a regular trigger, you chose to add a new trigger group. Now
you add "You see several sorts of berries." to the expression list of
the trigger group. When adding condions to a trigger group, the trigger
group turns from an organizational unit into a filter unit. From now on
this folder is a filter and will only let data through that matches
it’s condition.
In our case this is exactly what we want, because we don’t want to
collect all sorts of berries, but we only want 2 particular kinds,
namely, strawberries and blackberries. Now you add two regular triggers
to our berry filter - one containing the condition: "strawberries" and
the other one "blackberries". Then we add the commands to pick the
particular kind of berry to both triggers.
Now what happens is that as soon as a room description reads "You see
several sorts of berries." the filter will let the line containing the
room description pass through to our two berry triggers and they will
issue commands to pick berries. However, in any other situation the
words "strawberries" and "blackberries" will <strong>NOT</strong>
trigger - only in the above scenario when the filter parent’s condition
is met. This is a very nice way to solve complicated problems with a
few easy filter chains. This example is trivial, but using filter
chains will rapidly show you how formerly complicated things that could
only be solved with very complicated regular expressions can be solved
easily now with a couple of filter chains.</p></div>
<h3 id="_multi_line_triggers_and_multi_condition_triggers">3.4. Multi-Line Triggers and Multi-Condition Triggers</h3>
<div class="paragraph"><p>Multi Condition Triggers are the most
advanced feature of Mudlet’s trigger engine. Like trigger chains or
filter chains they are a form of AND-Triggers.
All conditions in the list must have matched within the specified
margin of lines (delta), in order to trigger the script.
Normal triggers fire and run the script as soon as one of the
conditions in the regex list is met i.e. if one of the regex/string
matches match - or the Lua function condition return true, the trigger
script is run.
In multiline triggers, however, each single regex/string/Lua function
condition in the list has to have matched within the specified margin
of lines at least once to trigger the script. The sequence of the
conditions is binding. This means if the 10th regex on the regex list
would be matched on the eleventh line after the match of the first line
happened, the trigger will <strong>NOT</strong>
run unless the margin of lines is set to 11. If condition #3 is true
but currently #2 is waiting to be true, condition #3 is ignored and
must be true again after condidtion #2 has been true.
Conditions can also be Lua Functions that return a boolean truth value.
You can mix all types of condtions.</p></div>
<div class="paragraph"><p>Example: Let’s go back to our pond &amp; frog
example. We have explained the difference between AND-triggers and
OR-triggers. If you have a room description consisting of 3 lines:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>1. You see a pond

2. You see a frog.

3. The frog sits on a stone.</tt></pre>
</div></div>
<div class="paragraph"><p>Every single one of these 3 lines will be fed
into the trigger engine one after another. If we define an OR-trigger
with a condition list consisting of 3 conditions</p></div>
<div class="paragraph"><p>condition #1: pond</p></div>
<div class="paragraph"><p>condition #2: frog</p></div>
<div class="paragraph"><p>condition #3: stone</p></div>
<div class="paragraph"><p>The trigger will fire the command or script 3
times i. e. the trigger will execute on each line it is matched against
because in every line at least one condition evaluates to true.</p></div>
<div class="paragraph"><p>in line #1 we get: pond = true. In line #2 we
get frog = true and in line #3 two conditions are true i.e. frog=true
and stone = true; Because an OR-trigger fires on the first condition
that is true and ignores the rest the trigger will only execute 3 times
on these 3 lines although 4 conditions are true.</p></div>
<div class="paragraph"><p>the multi condition switch must be turned off to get an OR-trigger):
conditi</p></div>
<div class="paragraph"><p>To complicate matters, however, you don’t
want your trigger to fire 3 commands, because you want to use this room
description as a whole to fire your trigger e. g. this pond is the only
kind of ponds in the entire world that doesn’t have poisoned water. So
you want to make sure that you only drink water from a pond of this
kind and from no other pond. Your solution is to use Multi Conditon
Triggers. If you check the MCT checkbox this trigger will fire only
once from now on - and only if all conditions are met i e. you can
guarantee that you only drink water from a good pond because your
drinking trigger is matching on the entire room description.</p></div>
<div class="paragraph"><p>Sadly, there are many unfriendly people in
this world and somebody goes around and poisons your good ponds.
Consequently, you would want to examine the frog and find out if it is
poisoned before drinking water from the pond. This is difficult because
the villain is a mean magician who used illusion spells to make
everything look like the good pond. To solve the problem you can now
resort to Lua function conditions in the trigger condition list that
perform certain check ups to put the current room description into a
wider context e. g. check if you have been here before etc. This adds
yet another level of complexity to your problem but this is a very
powerful means to use the full potential of Mudlet’s MCTs.</p></div>
<div class="paragraph"><p>You can combine all forms of conditions with
trigger chains, filters and Lua functions. Mudlet gives you relatively
easy to use tools that require no programming background. However,
these tools can evolve into complex powerful problem solving mechanisms
if they are combined with each other thus enabling non-programmer users
to solve problems that would need a profound programming background in
other MUD clients.</p></div>
<div class="admonitionblock">
<table><tbody><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Multiline triggers cannot yet pass all capture
groups on to the script. Currently, only the last condition will pass
on capturegroups. This issue will be resolved soon though. In the
future Mudlet will pass the 2-dimensional table multimatches[
conditionNumber ] [ matches[ ] ].</td>
</tr></tbody></table>
</div>
<h3 id="_temporary_triggers">3.5. Temporary Triggers</h3>
<div class="paragraph"><p>Temporary triggers are lightweight triggers
that are tailored for typical scripting needs. These are only available
via Lua scripting. They are not stored in profiles, but stay in memory
as long as the program runs or until they are deleted (killTimer()).</p></div>
<h3 id="_line_triggers_scripting_only">3.6. Line Triggers (scripting only)</h3>
<div class="paragraph"><p>Line triggers trigger on a specified line in
the future - or a sequence of lines - irrespective of the content of
the line. This type of triggers can be very handy in scripting if you
know what is coming e.g. you want to parse a table from the MUD, maps
etc.</p></div>
<h3 id="_the_timer_engine">3.7. The Timer Engine</h3>
<div class="paragraph"><p>Mudlet supports 3 different sort of timers:</p></div>
<div class="paragraph"><p>Timers that fire repeatedly in a certain interval specified by the user.</p></div>
<div class="paragraph"><p>Offset Timers are child timers of a parent
timer and fire a single shot after a specified timeout after their
parent firied its respective timeout. This interval is an offset to the
interval of its parent timer. Example: parent timer fires every 30
seconds and by doing so kicks off 3 offset timers with an offset of 5
seconds each. Consequently, the 3 children fire 5 seconds after each
time the parent timer fired. Offset timers differ visually from regular
timers and are represented with a + icon for offset. Offset timers can
be turned on and off by the user just like any other timer.</p></div>
<div class="paragraph"><p>Temporary Timers that very useful for
scripting. They behave like regular timers, but they are one shot only
timers. Temporary timers can not be accessed from the GUI and are not
saved in profiles.</p></div>
<h3 id="_using_mudlet_variables_in_your_script">3.8. Using Mudlet variables in your script.</h3>
<h3 id="_accessing_the_mudlet_buffer">3.9. Accessing the mudlet buffer</h3>
<div class="paragraph"><p>Press the big <tt>Stop All Triggers</tt> button in such an emergency.</p></div>
<h3 id="zscript-to-mudlet-lua">3.10. zScript (zMud scripting) to Mudlet’s Lua school</h3>
</div>
<h2 id="_lua_api">4. Lua API</h2>
<div class="sectionbody">
<div class="tableblock">
<table frame="border" rules="all" width="100%" cellpadding="4" cellspacing="0">
<col width="33%">
<col width="66%">
<tbody valign="top">
<tr>
<td align="left"><p class="table"><tt>clearUserWindow( window_name )</tt></p></td>
<td align="left"><p class="table">Clears the user window with the name given as argument.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>copy()</tt></p></td>
<td align="left"><p class="table">Copies the current selection to the
clipboard. This function operates on rich text, i. e. the selected text
including all its format codes like colors, fonts etc.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>cut()</tt></p></td>
<td align="left"><p class="table">Cuts the current selection and stores
it in the clipboard. This text remains available in the clipboard until
it gets overwritten by another cut or copy operation. This function
works on rich text ( see copy() )</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>deleteLine()</tt></p></td>
<td align="left"><p class="table">deletes the current Line under the user cursor.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>disableTimer( name )</tt></p></td>
<td align="left"><p class="table">Use timer name or the id returned by tempTimer() to identify the timer that you want to disable.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>disableTrigger( name )</tt></p></td>
<td align="left"><p class="table">Use trigger name or the id returned by tempTrigger() to identify the timer that you want to disable.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>disableKey( name )</tt></p></td>
<td align="left"><p class="table">Uses trigger name as id or the id returned by tempTrigger()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>echo( text )</tt></p></td>
<td align="left"><p class="table">NOTE: This function should only be
used from within triggers. Please use insertText() and insertHTML() as
general print functions. The echo() function will be given a more
appropriate name soon. It servers a special purpose i.e. it helps
printing text that contains linefeed characters \n i.e. it manages the
user cursor handling and makes sure that it is place correctly after
printing. See the documentation for details.
This will print after the current set of lines received from the MUD –
this must not necessarily be the end of the real paragraph as Mudlet
cannot possibly know when the textblock ends semantically. In most
cases, the paragraph will be contained in one TCP/IP data packet,
however, so this will work. In any case, using the echo() function does
not make it necessary to take care of the correct cursor placement.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>echoUserWindow( window_name, text )</tt></p></td>
<td align="left"><p class="table">prints text to user dock window name</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>enableTimer( name )</tt></p></td>
<td align="left"><p class="table">use timer name or the id returned by tempTimer()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>enableTrigger( name )</tt></p></td>
<td align="left"><p class="table">use trigger name or the id returned by tempTrigger()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>enableKey( name )</tt></p></td>
<td align="left"><p class="table">enable key or key group "name"</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>expandAlias( command )</tt></p></td>
<td align="left"><p class="table">like send(), but with alias expansion</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>lineNumber = getLineNumber()</tt></p></td>
<td align="left"><p class="table">to get the absolute line number of the current user cursor</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>number = getColumnNumber()</tt></p></td>
<td align="left"><p class="table">To get the absolute column number of the current user cursor</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>number = getLineCount()</tt></p></td>
<td align="left"><p class="table">To get the absolute amount of lines in the current console buffer</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>lua_table[relative_linenumber, content] =
getLines( from_line_number, to_line_number )</tt></p></td>
<td align="left"><p class="table">here absolute line numbers are used NOT RELATIVE</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>number_of_last_line = getLineCount()</tt></p></td>
<td align="left"><p class="table"></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>insertText( string )</tt></p></td>
<td align="left"><p class="table">Insertion takes place at the current
position of the user cursor – or replaces the current selection. If you
don’t want this use selectString("") to deselect the last selection.
//FIXME cursor position after deselection?</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>killTimer( name )</tt></p></td>
<td align="left"><p class="table">NOTE: killTimer() calls on timers you
have created with the GUI isn’t safe at this point. If you’ll click on
a deleted Timer Mudlet will crash. Only use this on tempTimer() created
timers. //FIXME</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>killTrigger( name )</tt></p></td>
<td align="left"><p class="table">See killTimer()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>boolean = moveCursor( x, y )</tt></p></td>
<td align="left"><p class="table">Moves the user cursor (x,y) coordinates relative from its current position. Returns false if such a move is impossible.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>openUserWindow( name )</tt></p></td>
<td align="left"><p class="table">Opens a user dockable console window
for user output e.g. statistics, chat etc. If a window of such a name
already exists, nothing happens. You can move these windows, dock them,
make them into notebook tabs or float them.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>paste()</tt></p></td>
<td align="left"><p class="table">pastes the previously copied or cut
text including all format codes like color, font etc. at the current
user cursor position. This example cuts out the current line and thus
deletes it and inserts it 3 lines above:
selectString( line, 1 )
cut()
moveCursor( 0, -3 )
paste()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>pasteWindow( name )</tt></p></td>
<td align="left"><p class="table">pastes the previously copied or cut rich text (including text formats like color etc.) into user window (dock window) name.
selectString( line, 1 )
cut()
pasteWindow( "chat" )</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>raiseEvent( event_name, arg-1, … arg-n )</tt></p></td>
<td align="left"><p class="table">Raises the event event_name. The
event system will call the main function (the one that is called
exactly like the script name) of all such scripts that have registered
event handlers. If an event is raised, but no event handler scripts
have been registered with the event system, the event is ignored and
nothing happens. This is convenient as you can raise events in your
triggers, timers, scripts etc. without having to care if the actual
event handling has been implemented yet – or more specifically how it
is implemented. Your triggers raise an event to tell the system that
they have detected a certain condition to be true or that a certain
event has happened. How – and if – the system is going to respond to
this event is up to the system and your trigger scripts don’t have to
care about such details. For small systems it will be more convienient
to use regular function calls instead of events, however, the more
complicated your system will get, the more important events will become
because they help reduce complexity very much.
The corresponding event handlers that listen to the events raised with
raiseEvent() need to use the script name as function name and take the
correct number of arguments. NOTE: If you raise an event with 5
arguments but your event handlers functions only take 2,10 or 0
arguments, the functions will not be called. For exmaple:
raiseEvent("fight") a correct event handler function would be:
myScript( event_name ). In this example raiseEvent uses minimal
arguments, name the event name. There can only be one event handler
function per script, but a script can still handle multiple events as
the first argument is always the event name. So you can call your own
special handlers for individual events. The reason behind this is that
you should rather use many individual scripts instead of one huge
script that has all your function code etc. Scripts can be organized
very well in trees and thus help reduce complexity on large systems.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>replace( with )</tt></p></td>
<td align="left"><p class="table">replaces the selected text with "with". To delete text use replace("")</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>replaceAll( what, with )</tt></p></td>
<td align="left"><p class="table">replaces all occurrences of what in the current line with with</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>int pos_begin_of_match_in_line =
selectString( text, number_of_match ) or -1 on error</tt></p></td>
<td align="left"><p class="table">Selects a substring from the line
where the user cursor is currently positioned. You can move the user
cursor with moveCursor(). When a new line arrives from the MUD, the
user cursor is positioned at the beginning of the line. However, if one
of your trigger scripts moves the cursor around you need to take care
of the cursor position yourself and make sure that the cursor is in the
correct line if you want to call one of the select functions.
NOTE: to prevent selection of random data use the error return if not
found like this:
if selectString( "big monster",1) &gt; -1 then setFgColor( 255,0,0) end</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>boolean = selectSection( from, length_of_string )</tt></p></td>
<td align="left"><p class="table">Absolute column number for start of selection and length of selection</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>selectCaptureGroup( groupNumber ) with first group = 0</tt></p></td>
<td align="left"><p class="table">Selects the content of the capture
group number in your perl regular expression e.g. "you have (\d+)
Euro". If you want to color the amount of money you have green you do:
selectCaptureGroup(1); setFgColor(0,255,0)</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>send( command )</tt></p></td>
<td align="left"><p class="table">This sends data directly to the socket layer, bypassing the alias expansion unit</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>setBgColor( r,g,b )</tt></p></td>
<td align="left"><p class="table">Values are RGB: red, green, blue ranging from 0-255 e.g. for red: setFgColor(255,0,0)</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>setFgColor( r, g, b )</tt></p></td>
<td align="left"><p class="table">Values are RGB: red, green, blue ranging from 0-255 e.g. for blue: setBgColor(0,0,255)</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>setTextFormatBold( boolean )</tt></p></td>
<td align="left"><p class="table"></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>setTextFormatUnderlined( boolean )</tt></p></td>
<td align="left"><p class="table"></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>timer_id = tempTimer( seconds, lua_code )</tt></p></td>
<td align="left"><p class="table">You can use 2.3 seconds or 0.45 etc.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>trigger_id = tempTrigger( string, lua_code )</tt></p></td>
<td align="left"><p class="table">temporary trigger using substring matching</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>trigger_id = tempLineTrigger( from, howMany, LuaCode )</tt></p></td>
<td align="left"><p class="table">Temporary trigger that will fire on n
consecutive lines following the current line. This is useful to parse
output that is known to arrive in a certain line margin or to delete
unwanted output from the MUD. Example: tempLineTrigger( 1, 3, <a id="send(“shout Help”)"></a> ) will fire 3 times starting with the line from the MUD.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>tempLineTrigger( 20, 2, <a id="send(" shout="" help="" )=""></a> )</tt></p></td>
<td align="left"><p class="table">will fire 20 lines after the current line and fire twice on 2 consecutive lines.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>trigger_id = tempRegexTrigger( regex, lua_code )</tt></p></td>
<td align="left"><p class="table">temorary trigger using perl regex pattern matching</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>userWindowLineWrap( window, boolean )</tt></p></td>
<td align="left"><p class="table">turns line wrap mode on or off in user dock windows</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>userWindowLineWrap( "chat", true )   turns on line wrap for window ""chat"""</tt></p></td>
<td align="left"><p class="table"></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>printTable( table_name )</tt></p></td>
<td align="left"><p class="table">Lua debug function that prints the
content of a Lua table on the screen, split up in keys and values.
Useful if you want to see what the capture groups contain i. e. the lua
table "matches".
This function is defined in luaglobal.lua.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>showCaptureGroups()</tt></p></td>
<td align="left"><p class="table">Lua debug function that highlights
all capture groups in your trigger regex on the screen. This is very
handy if you make complex regex and want to see what really matches in
the text. example: make a trigger with the regex (\w) and call this
function in the trigger script. All words in the text will be
highlighted in random colors. This function is defined in luaglobal.lua</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>fg( "red" )</tt></p></td>
<td align="left"><p class="table">Sets the current foreground color to
red. Check the luaglobal.lua file for the defined color names ( about
255) e.g. fg("green") will set the foreground color to green.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>bg( "blue" )</tt></p></td>
<td align="left"><p class="table">same as fg( color_name ) just for the background color.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>table.load( file, table )</tt></p></td>
<td align="left"><p class="table">restores a Lua table from a data file that has been saved with table.save()</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>table.save( file, table )</tt></p></td>
<td align="left"><p class="table">saves the given table into the given file</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>showCaptureGroups()</tt></p></td>
<td align="left"><p class="table">a debug function for building
triggers: this function highlights all capture groups in random colors
in the MUD output text online on the screen. You get more precise debug
information on what captured what and when if you look at the debug
console (→trigger editor→bug symbol)</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>printTable( table )</tt></p></td>
<td align="left"><p class="table">another debug function that prints the content of a Lua table on the screen split in key and value.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>sendAll( what )</tt></p></td>
<td align="left"><p class="table">sends a list of commands to the MUD</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>suffix( what )</tt></p></td>
<td align="left"><p class="table">prints "what" at the end of the line when used in a trigger script</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>prefix( what )</tt></p></td>
<td align="left"><p class="table">prints "what" at the beginning of a line when used in a trigger script</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>debug( arg1 … argn )</tt></p></td>
<td align="left"><p class="table">prints out debug information to the user debug console</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>function replaceWildcard(what, replacement)</tt></p></td>
<td align="left"><p class="table">Replaces the given wildcard (as a number) with the given text.
Example: replaceWildcard(1, "hello") on a trigger of <tt>^You wave (goodbye)\.$</tt></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>Mudlet Variables</tt></p></td>
<td align="left"><p class="table"></p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>command</tt></p></td>
<td align="left"><p class="table">Lua variable that holds the last command issued by the user. This is the command <strong>before</strong> alias expansion.</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>line</tt></p></td>
<td align="left"><p class="table">Lua variable line holds the current content of the current line from the MUD</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>matches[1] … matches[n]</tt></p></td>
<td align="left"><p class="table">Lua table that holds the text of the capture groups (only with perl regular expressions)</p></td>
</tr>
<tr>
<td align="left"><p class="table"><tt>multilinematches[conditonNumber][matches[]]</tt></p></td>
<td align="left"><p class="table">Lua table containing the Lua table matches[] for every condition in a multiline trigger</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h2 id="_appendix_a">5. Appendix A</h2>
<div class="sectionbody">
<h3 id="_mud_mmorpg_specific_glossary">5.1. MUD/MMORPG-specific glossary</h3>
<div class="paragraph"><p>TEMP NOTE: Keep the syntax as-is. Weird looking syntax is easy to auto-reformat later on.</p></div>
<div class="paragraph"><p><tt>Aliases</tt> - user-defined text input,
which is converted into a different, usually longer input before being
sent to the MUD, e.g. "gg" → "get gold from ground;put gold in 2.bag".</p></div>
<div class="paragraph"><p><tt>d/c</tt> - also known as <tt>link-death</tt>, loss of connection between the client and the server</p></div>
<div class="paragraph"><p><tt>Drop</tt> - items or gold dropped by killed enemies</p></div>
<div class="paragraph"><p><tt>Events</tt> - <tt>triggers</tt> for specific events, e.g. Mudlet connecting to the MUD or user-defined events to used in a complex system</p></div>
<div class="paragraph"><p><tt>Hotkeys</tt> - also known as <tt>keybindings</tt>,
allow executing certain user-defined commands by simultaneously
pressing a specific combination of keys, e.g. "CTRL+H" → "send say
Hello Miyuki!" to the MUD or plays La Marseillaise</p></div>
<div class="paragraph"><p><tt>Keybindings</tt> - also known as <tt>hotkeys</tt>,
allow executing certain user-defined commands by simultaneously
pressing a specific combination of keys, e.g. "CTRL+H" → "send say
Hello Miyuki!" to the MUD or plays La Marseillaise</p></div>
<div class="paragraph"><p><tt>Link-death</tt> - also known as <tt>d/c</tt>, loss of connection between the client and the server</p></div>
<div class="paragraph"><p><tt>Loot</tt> - items or gold dropped by killed enemies</p></div>
<div class="paragraph"><p><tt>MMORPG</tt> - Massive Multiplayer Online Role-Rlaying Game - the modern, large-scale counterpart to MUDs</p></div>
<div class="paragraph"><p><tt>MUD</tt> - Multi-User Dungeon - a typically text-driven online game</p></div>
<div class="paragraph"><p><tt>Role-playing game</tt> - a game in which the players assume the roles of fictional characters</p></div>
<div class="paragraph"><p><tt>Script</tt> - program code used to
control the actions of a piece of software. In Mudlet specifically,
instructions to Mudlet on how to handle specific events</p></div>
<div class="paragraph"><p><tt>Timers</tt> - delay the execution of a
command or execute it after a specified period of time, e.g. "throw
gauntlet to Eric"-wait 3 seconds-"exclaim Let us end this here!"</p></div>
<div class="paragraph"><p><tt>Triggers</tt> - execute user-defined
commands upon receiving specific out from the MUD, e.g. MUD sends "You
see Elyssa standing here." → send "poke Elyssa" to the MUD.</p></div>
<div class="paragraph"><p><tt>Variables</tt> - allow the user to store
specific text or numbers for use with other functionality, e.g. if
"%pack" = "reeking, purple backpack", typing in "say I’d like to give
you this %pack, Natalie." would result in "say I’d like to give you
this reeking, purple backpack, Natalie."</p></div>
<div class="paragraph"><p>Sources: wikipedia.org</p></div>
</div>
<div id="footer">
<div id="footer-text">
Version Draft 1<br>
Last updated 2009-03-13 13:12:30 EDT
</div>
</div>
</body></html>